<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsf/composite"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">
	<ui:define name="content">
		<h1>Passwort ändern</h1>

		<h:form id="frmPw" styleClass="form-horizontal" role="form">
			<div class="form-group">
				<!-- user -->
				<div class="form-group">
					<h:outputLabel for="email" value="E-Mail"
						styleClass="col-sm-2 control-label" />
					<div class="col-sm-10">
						<h:outputText id="email" value="#{changePasswordHome.email}"
							styleClass="form-control" />
					</div>
				</div>

				<div class="form-group">
					<h:outputLabel for="oldPassword" value="Altes Passwort *"
						styleClass="col-sm-2 control-label" />
					<div class="col-sm-10">
						<h:inputSecret id="oldPassword"
							value="#{changePasswordHome.oldPw}" required="true"
							styleClass="form-control" />
						<p:message for="email" />
					</div>
				</div>
				<div class="form-group">
					<h:outputLabel for="password" value="Neues Passwort *"
						styleClass="col-sm-2 control-label" />
					<div class="col-sm-10">
						<p:password id="password" value="#{changePasswordHome.newPw}"
							required="true" match="passwordConfirm" styleClass="form-control" />
						<p:message for="password" />
					</div>
				</div>
				<div class="form-group">
					<h:outputLabel for="passwordConfirm" value="Passwort bestätigen"
						styleClass="col-sm-2 control-label" />
					<div class="col-sm-10">
						<p:password id="passwordConfirm"
							value="#{changePasswordHome.newPw}" required="true"
							styleClass="form-control" />
						<p:message for="passwordConfirm" />
					</div>
				</div>
				
				Password has changed, but the jaas cache has the old value (timeout 30min).
				<!-- 
				https://docs.jboss.org/jbossas/admindevel326/html/ch8.chapter.html
				http://www.mastertheboss.com/jboss-server/jboss-security/jboss-security-framework
				https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/5/html/Security_Guide/sect-JaasSecurityManagerService_MBean.html
				 -->

				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<h:commandButton id="btnUpdate" action="#{changePasswordHome.change}"
							value="Aktualisieren" styleClass="btn btn-default" />
					</div>
				</div>
			</div>
		</h:form>

	</ui:define>
</ui:composition>
